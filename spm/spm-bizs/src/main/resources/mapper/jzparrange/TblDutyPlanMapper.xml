<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ts.spm.bizs.mapper.jzparrange.TblDutyPlanMapper">
  <resultMap id="BaseResultMap" type="com.ts.spm.bizs.entity.jzparrange.TblDutyPlan">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <constructor>
      <arg column="ID" javaType="java.lang.String" jdbcType="VARCHAR" />
      <arg column="SCHEDULE_ID" javaType="java.lang.String" jdbcType="VARCHAR" />
      <arg column="DUTY_DATE" javaType="java.lang.String" jdbcType="VARCHAR" />
      <arg column="STIME" javaType="java.util.Date" jdbcType="TIMESTAMP" />
      <arg column="ETIME" javaType="java.util.Date" jdbcType="TIMESTAMP" />
      <arg column="CRT_TIME" javaType="java.util.Date" jdbcType="TIMESTAMP" />
      <arg column="CRT_USER_ID" javaType="java.lang.String" jdbcType="VARCHAR" />
      <arg column="CRT_USER_NAME" javaType="java.lang.String" jdbcType="VARCHAR" />
      <arg column="DEL_TIME" javaType="java.util.Date" jdbcType="TIMESTAMP" />
      <arg column="DEL_USER_ID" javaType="java.lang.String" jdbcType="VARCHAR" />
      <arg column="DEL_USER_NAME" javaType="java.lang.String" jdbcType="VARCHAR" />
      <arg column="DEL_FLAG" javaType="java.lang.Short" jdbcType="DECIMAL" />
      <arg column="MEMO" javaType="java.lang.String" jdbcType="VARCHAR" />
    </constructor>
  </resultMap>
  <select id="selectDateStatus" parameterType="String"
		resultType="java.util.Map">
		SELECT
			* 
		FROM
			jzp_oper.TBL_DUTY_PLAN
		WHERE
			DUTY_DATE IN ( '${beginTime}', '${endTime}' )
	</select>
	<delete id="delectDate" parameterType="int">
	DELETE 
	FROM
		jzp_oper.TBL_DUTY_PLAN
	WHERE
      DUTY_DATE IN 
      <foreach close=")" collection="dateList" index="index" item="item" open="(" separator=",">
        #{item}
      </foreach>
	</delete>
	<select id="selectInfo" parameterType="String"
		resultType="java.util.Map">
		SELECT
			tdp.DUTY_DATE AS "dutyDate",
			tdp.stime AS "stime",
			tdp.etime AS "etime",
			tdp.id AS "id",
			tdm.user_Name AS "userName" 
		FROM
		jzp_oper.TBL_DUTY_PERSON_SCHEDULE tdps,
		jzp_oper.TBL_DUTY_PLAN tdp,
		jzp_oper.TBL_DUTY_MAN tdm
		WHERE
			tdps.SCHEDULE_ID = tdp.SCHEDULE_ID 
			AND tdm.USER_ID = tdps.USER_ID 
			AND tdm.USER_TYPE = ${userType}
			<if test="userName != '' ">
			AND tdm.user_name = '${userName}'
			</if>
			<if test="beginTime != '' ">
			AND tdp.DUTY_DATE &gt;= '${beginTime}'
			</if>
			<if test="endTime != '' ">
			AND tdp.DUTY_DATE &lt;= '${endTime}'
			</if>
	</select>
	<delete id="delect" parameterType="string">
	DELETE 
	FROM
		jzp_oper.TBL_DUTY_PLAN
	WHERE
      id = '${id}'
	</delete>
</mapper>